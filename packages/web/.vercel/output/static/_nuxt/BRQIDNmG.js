import{_ as H}from"./CG-kJPW7.js";import{u as N}from"./doLWckKU.js";import{g as P,A as S,c as n,a as e,m as t,d as g,F as u,r as m,b as v,w as x,k as M,o,D as E,t as a,n as f,G as h,B as _}from"./BQ0Yrhh0.js";const T={class:"animate-fade-in space-y-6"},L={class:"flex items-center justify-between"},D={key:0,class:"flex items-center justify-center py-24"},O={key:1,class:"glass-card p-8 text-center"},W={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},I={class:"flex items-start justify-between"},G={class:"text-white/50 text-xs uppercase tracking-wider mb-1"},U={class:"text-2xl font-bold text-white"},F=["d"],K={key:0,class:"flex items-end gap-[2px] h-32"},Q={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10"},Z={class:"bg-[#1a1a2e] border border-white/10 rounded-lg px-2 py-1 text-xs text-white whitespace-nowrap shadow-lg"},q={key:1,class:"text-white/30 text-sm text-center py-8"},J={key:2,class:"flex justify-between mt-2 text-white/30 text-[10px]"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Y={class:"space-y-3"},ee={class:"flex items-center justify-between text-xs mb-1"},te={class:"text-white/70"},se={class:"text-white/40"},le={class:"h-2 bg-white/[0.06] rounded-full overflow-hidden"},ie={class:"space-y-3"},oe={class:"flex items-center justify-between text-xs mb-1"},ne={class:"text-white/70"},ae={class:"text-white/40"},de={class:"h-2 bg-white/[0.06] rounded-full overflow-hidden"},re={class:"space-y-3"},ce={class:"flex items-center justify-between text-xs mb-1"},ue={class:"text-white/70"},he={class:"text-white/40"},me={class:"h-2 bg-white/[0.06] rounded-full overflow-hidden"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"space-y-4"},ge={class:"flex items-center justify-between text-sm mb-1.5"},fe={class:"text-white/50"},pe={class:"h-3 bg-white/[0.06] rounded-full overflow-hidden"},be={class:"flex items-center justify-between text-sm mb-1.5"},_e={class:"text-white/50"},we={class:"h-3 bg-white/[0.06] rounded-full overflow-hidden"},ye={class:"flex items-center justify-between text-sm mb-1.5"},ke={class:"text-white/50"},Me={class:"h-3 bg-white/[0.06] rounded-full overflow-hidden"},Ce={key:0,class:"space-y-3"},Ve={class:"flex items-center justify-between text-xs mb-1"},je={class:"text-white/70 capitalize"},Ae={class:"text-white/40"},Be={class:"h-2 bg-white/[0.06] rounded-full overflow-hidden"},ze={key:1,class:"text-white/30 text-sm text-center py-4"},Re={key:0,class:"space-y-3"},$e={class:"text-white/30 text-xs w-5 text-right"},He={class:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-sm text-indigo-300 font-semibold flex-shrink-0"},Ne={class:"flex-1 min-w-0"},Pe={class:"flex items-center justify-between mb-1"},Se={class:"text-white/80 text-sm truncate"},Ee={class:"text-white/40 text-xs"},Te={class:"h-1.5 bg-white/[0.06] rounded-full overflow-hidden"},Le={key:1,class:"text-white/30 text-sm text-center py-4"},Ge=P({__name:"analytics",async setup(De){let p,w;const{data:C,pending:V,error:j,refresh:y}=([p,w]=S(()=>N("/api/analytics",{key:"analytics-data"},"$fQIe7nZWbn")),p=await p,w(),p),s=_(()=>C.value?.data),A=_(()=>{const r=s.value?.overview;return r?[{label:"Total Tickets",value:r.totalTickets,icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",color:"text-blue-400",bg:"bg-blue-500/10"},{label:"Resolution Rate",value:`${r.resolutionRate}%`,icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"text-emerald-400",bg:"bg-emerald-500/10"},{label:"Avg. Resolution",value:r.avgResolutionHours>0?`${r.avgResolutionHours}h`:"â€”",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",color:"text-amber-400",bg:"bg-amber-500/10"},{label:"This Week",value:r.ticketsThisWeek,icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",color:"text-purple-400",bg:"bg-purple-500/10"}]:[]}),B=_(()=>s.value?.dailyVolume?Math.max(1,...s.value.dailyVolume.map(r=>r.count)):1),z={WEB:{label:"Web",color:"bg-blue-400"},EMAIL:{label:"Email",color:"bg-indigo-400"},WHATSAPP:{label:"WhatsApp",color:"bg-green-400"},SLACK:{label:"Slack",color:"bg-purple-400"}},R={OPEN:{label:"Open",color:"bg-blue-400"},IN_PROGRESS:{label:"In Progress",color:"bg-amber-400"},RESOLVED:{label:"Resolved",color:"bg-emerald-400"},CLOSED:{label:"Closed",color:"bg-white/40"}},$={URGENT:{label:"Urgent",color:"bg-red-400"},HIGH:{label:"High",color:"bg-orange-400"},MEDIUM:{label:"Medium",color:"bg-amber-400"},LOW:{label:"Low",color:"bg-emerald-400"}};function b(r){return r?Math.max(1,Object.values(r).reduce((i,c)=>i+c,0)):1}function k(r){return new Date(r).toLocaleDateString("en",{month:"short",day:"numeric"})}return(r,i)=>{const c=H;return o(),n("div",T,[e("div",L,[i[3]||(i[3]=e("div",null,[e("h2",{class:"text-xl font-bold text-white"},"Analytics"),e("p",{class:"text-white/40 text-sm mt-1"},"Performance metrics and ticket insights")],-1)),e("button",{onClick:i[0]||(i[0]=l=>t(y)()),class:"btn-ghost text-sm flex items-center gap-1.5"},[...i[2]||(i[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),g(" Refresh ",-1)])])]),t(V)?(o(),n("div",D,[...i[4]||(i[4]=[e("div",{class:"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full"},null,-1)])])):t(j)?(o(),n("div",O,[i[5]||(i[5]=e("p",{class:"text-red-300"},"Failed to load analytics data.",-1)),e("button",{onClick:i[1]||(i[1]=l=>t(y)()),class:"btn-primary mt-4 text-sm"},"Retry")])):t(s)?(o(),n(u,{key:2},[e("div",W,[(o(!0),n(u,null,m(t(A),l=>(o(),E(c,{key:l.label,padding:"md",hover:!0},{default:x(()=>[e("div",I,[e("div",null,[e("p",G,a(l.label),1),e("p",U,a(l.value),1)]),e("div",{class:f([l.bg,"p-2 rounded-xl"])},[(o(),n("svg",{class:f(["w-5 h-5",l.color]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:l.icon},null,8,F)],2))],2)])]),_:2},1024))),128))]),v(c,{padding:"md"},{default:x(()=>[i[6]||(i[6]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),g(" Ticket Volume â€” Last 30 Days ")],-1)),t(s).dailyVolume.length?(o(),n("div",K,[(o(!0),n(u,null,m(t(s).dailyVolume,l=>(o(),n("div",{key:l.date,class:"flex-1 group relative"},[e("div",{class:"bg-indigo-500/60 hover:bg-indigo-400/80 rounded-t-sm transition-all duration-200 w-full",style:h({height:`${Math.max(2,l.count/t(B)*100)}%`})},null,4),e("div",Q,[e("div",Z,a(k(l.date))+": "+a(l.count)+" ticket"+a(l.count!==1?"s":""),1)])]))),128))])):(o(),n("p",q,"No ticket data available")),t(s).dailyVolume.length?(o(),n("div",J,[(o(!0),n(u,null,m(t(s).dailyVolume.filter((l,d)=>d%7===0),(l,d)=>(o(),n("span",{key:l.date},a(k(l.date)),1))),128))])):M("",!0)]),_:1}),e("div",X,[v(c,{padding:"md"},{default:x(()=>[i[7]||(i[7]=e("h3",{class:"text-white font-semibold text-sm mb-4"},"By Channel",-1)),e("div",Y,[(o(),n(u,null,m(z,(l,d)=>e("div",{key:d},[e("div",ee,[e("span",te,a(l.label),1),e("span",se,a(t(s).channels[d]??0),1)]),e("div",le,[e("div",{class:f([l.color,"h-full rounded-full transition-all duration-500"]),style:h({width:`${(t(s).channels[d]??0)/b(t(s).channels)*100}%`})},null,6)])])),64))])]),_:1}),v(c,{padding:"md"},{default:x(()=>[i[8]||(i[8]=e("h3",{class:"text-white font-semibold text-sm mb-4"},"By Status",-1)),e("div",ie,[(o(),n(u,null,m(R,(l,d)=>e("div",{key:d},[e("div",oe,[e("span",ne,a(l.label),1),e("span",ae,a(t(s).statuses[d]??0),1)]),e("div",de,[e("div",{class:f([l.color,"h-full rounded-full transition-all duration-500"]),style:h({width:`${(t(s).statuses[d]??0)/b(t(s).statuses)*100}%`})},null,6)])])),64))])]),_:1}),v(c,{padding:"md"},{default:x(()=>[i[9]||(i[9]=e("h3",{class:"text-white font-semibold text-sm mb-4"},"By Priority",-1)),e("div",re,[(o(),n(u,null,m($,(l,d)=>e("div",{key:d},[e("div",ce,[e("span",ue,a(l.label),1),e("span",he,a(t(s).priorities[d]??0),1)]),e("div",me,[e("div",{class:f([l.color,"h-full rounded-full transition-all duration-500"]),style:h({width:`${(t(s).priorities[d]??0)/b(t(s).priorities)*100}%`})},null,6)])])),64))])]),_:1})]),e("div",xe,[v(c,{padding:"md"},{default:x(()=>[i[13]||(i[13]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),g(" Sentiment Analysis ")],-1)),e("div",ve,[e("div",null,[e("div",ge,[i[10]||(i[10]=e("span",{class:"text-emerald-400 flex items-center gap-1.5"},"ðŸ˜Š Positive",-1)),e("span",fe,a(t(s).sentiment.positive),1)]),e("div",pe,[e("div",{class:"h-full bg-emerald-500 rounded-full transition-all duration-500",style:h({width:`${t(s).sentiment.positive/Math.max(1,t(s).sentiment.positive+t(s).sentiment.neutral+t(s).sentiment.negative)*100}%`})},null,4)])]),e("div",null,[e("div",be,[i[11]||(i[11]=e("span",{class:"text-amber-400 flex items-center gap-1.5"},"ðŸ˜ Neutral",-1)),e("span",_e,a(t(s).sentiment.neutral),1)]),e("div",we,[e("div",{class:"h-full bg-amber-500 rounded-full transition-all duration-500",style:h({width:`${t(s).sentiment.neutral/Math.max(1,t(s).sentiment.positive+t(s).sentiment.neutral+t(s).sentiment.negative)*100}%`})},null,4)])]),e("div",null,[e("div",ye,[i[12]||(i[12]=e("span",{class:"text-red-400 flex items-center gap-1.5"},"ðŸ˜  Negative",-1)),e("span",ke,a(t(s).sentiment.negative),1)]),e("div",Me,[e("div",{class:"h-full bg-red-500 rounded-full transition-all duration-500",style:h({width:`${t(s).sentiment.negative/Math.max(1,t(s).sentiment.positive+t(s).sentiment.neutral+t(s).sentiment.negative)*100}%`})},null,4)])])])]),_:1}),v(c,{padding:"md"},{default:x(()=>[i[14]||(i[14]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})]),g(" Top Categories ")],-1)),t(s).categories.length?(o(),n("div",Ce,[(o(!0),n(u,null,m(t(s).categories,l=>(o(),n("div",{key:l.name},[e("div",Ve,[e("span",je,a(l.name.toLowerCase().replace(/_/g," ")),1),e("span",Ae,a(l.count),1)]),e("div",Be,[e("div",{class:"h-full bg-indigo-500 rounded-full transition-all duration-500",style:h({width:`${l.count/Math.max(1,t(s).categories[0]?.count??1)*100}%`})},null,4)])]))),128))])):(o(),n("p",ze,"No categorized tickets yet. AI will auto-categorize new tickets."))]),_:1})]),v(c,{padding:"md"},{default:x(()=>[i[15]||(i[15]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})]),g(" Agent Performance â€” Resolved Tickets ")],-1)),t(s).agentPerformance.length?(o(),n("div",Re,[(o(!0),n(u,null,m(t(s).agentPerformance,(l,d)=>(o(),n("div",{key:l.id,class:"flex items-center gap-3"},[e("span",$e,"#"+a(d+1),1),e("div",He,a(l.name.charAt(0).toUpperCase()),1),e("div",Ne,[e("div",Pe,[e("span",Se,a(l.name),1),e("span",Ee,a(l.resolved)+" resolved",1)]),e("div",Te,[e("div",{class:"h-full bg-indigo-500 rounded-full transition-all duration-500",style:h({width:`${l.resolved/Math.max(1,t(s).agentPerformance[0]?.resolved??1)*100}%`})},null,4)])])]))),128))])):(o(),n("p",Le,"No agent performance data yet. Assign and resolve tickets to see stats."))]),_:1})],64)):M("",!0)])}}});export{Ge as default};
