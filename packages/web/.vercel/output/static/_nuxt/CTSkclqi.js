import{_ as D}from"./I6UOz-_e.js";import{g as A,o as n,D as L,a as t,b as x,a3 as F,w as m,c as i,F as y,r as z,m as s,n as f,t as l,T as O,_ as B,A as G,C as P,z as W,k as v,I as $,d as j,x as q,a2 as J,y as w}from"./BQ0Yrhh0.js";import{u as K}from"./B_U5j8G_.js";import{_ as Q}from"./ChollThA.js";import{u as X}from"./DG9wHV8O.js";import"./DqtgAKHa.js";const Y={class:"fixed bottom-4 right-4 z-[9999] flex flex-col gap-2 w-80 pointer-events-none"},Z=["onClick"],tt=["d"],et={class:"flex-1 min-w-0"},ot={class:"text-sm font-medium text-white leading-snug"},st=A({__name:"Toast",setup(H){const{toasts:_,dismiss:g}=K(),r={info:{icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",bg:"bg-white/10 border-white/20",icon_color:"text-blue-400",title:"Info"},success:{icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",bg:"bg-green-500/10 border-green-500/20",icon_color:"text-green-400",title:"Success"},warning:{icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",bg:"bg-amber-500/10 border-amber-500/20",icon_color:"text-amber-400",title:"Warning"},error:{icon:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",bg:"bg-red-500/10 border-red-500/20",icon_color:"text-red-400",title:"Error"}};return(u,d)=>(n(),L(O,{to:"body"},[t("div",Y,[x(F,{name:"toast",tag:"div",class:"flex flex-col gap-2"},{default:m(()=>[(n(!0),i(y,null,z(s(_),c=>(n(),i("div",{key:c.id,class:f(["pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-md shadow-xl cursor-pointer select-none",r[c.type].bg]),onClick:b=>s(g)(c.id)},[(n(),i("svg",{class:f(["w-5 h-5 mt-0.5 flex-shrink-0",r[c.type].icon_color]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r[c.type].icon},null,8,tt)],2)),t("div",et,[t("p",ot,l(c.message),1),d[0]||(d[0]=t("p",{class:"text-xs text-white/40 mt-0.5"},"Click to dismiss",-1))])],10,Z))),128))]),_:1})])]))}}),nt=Object.assign(B(st,[["__scopeId","data-v-f432c417"]]),{__name:"UiToast"}),it={class:"flex h-screen bg-app-gradient overflow-hidden"},rt={class:"flex flex-col h-full bg-[#0d0b24]/90 backdrop-blur-xl border-r border-white/[0.06]"},at={class:"flex items-center gap-3 p-6 border-b border-white/10"},lt={class:"min-w-0"},ct={class:"text-white font-semibold text-sm truncate"},dt={class:"flex-1 px-4 py-4 space-y-1 overflow-y-auto"},ht=["d"],ut={class:"p-4 border-t border-white/10"},ft={class:"flex items-center gap-3 px-3 py-2"},xt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold flex-shrink-0"},mt={class:"min-w-0 flex-1"},pt={class:"text-white text-sm font-medium truncate"},vt={class:"text-white/40 text-xs truncate"},wt={class:"flex-1 flex flex-col min-w-0 overflow-hidden"},_t={class:"relative z-40 flex items-center gap-4 px-6 py-4 border-b border-white/[0.06] bg-white/[0.02] backdrop-blur-sm"},gt={class:"text-white font-semibold text-lg flex-1"},bt={class:"flex items-center gap-3"},kt={class:"relative"},yt={key:0,class:"absolute -top-1 -right-1 min-w-[16px] h-4 px-1 bg-red-500 rounded-full text-[10px] text-white font-bold flex items-center justify-center"},Mt={key:0,class:"absolute right-0 top-full mt-2 w-80 sm:w-96 max-h-[28rem] bg-[#12101f] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50"},Ct={key:0,class:"flex items-center justify-center py-8"},zt={key:1,class:"overflow-y-auto max-h-[22rem] divide-y divide-white/[0.04]"},Tt={class:"mt-0.5 flex-shrink-0"},Vt=["d"],Nt={class:"flex-1 min-w-0"},$t={class:"flex items-center gap-2"},jt={class:"text-white/80 text-sm font-medium"},At={key:0,class:"px-1.5 py-0.5 bg-red-500/20 text-red-300 text-[9px] rounded-full uppercase font-bold"},Lt={class:"text-white/40 text-xs mt-0.5 truncate"},Bt={class:"text-white/20 text-[10px] mt-1"},Ht={key:2,class:"py-8 text-center"},It={class:"flex-1 overflow-y-auto p-6"},St=A({__name:"dashboard",async setup(H){let _,g;const r=X();r.isInitialized||([_,g]=G(()=>r.fetchCurrentUser()),await _,g());const u=w(!1),d=w(!1),c=w(!1),b=w([]),k=w(0);async function T(){c.value=!0;try{const a=await $fetch("/api/notifications");b.value=a.data.notifications,k.value=a.data.unreadCount}catch{}finally{c.value=!1}}function I(){d.value=!d.value,d.value&&T()}function M(){d.value=!1}function S(a){switch(a){case"new_ticket":return"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2";case"customer_message":return"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z";case"sla_breach":return"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z";case"ai_suggestion":return"M13 10V3L4 14h7v7l9-11h-7z";default:return"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}}function U(a){switch(a){case"new_ticket":return"text-blue-400";case"customer_message":return"text-emerald-400";case"sla_breach":return"text-red-400";case"ai_suggestion":return"text-purple-400";default:return"text-white/40"}}function E(a){const e=Date.now()-new Date(a).getTime(),h=Math.floor(e/6e4);if(h<1)return"just now";if(h<60)return`${h}m ago`;const p=Math.floor(h/60);return p<24?`${p}h ago`:`${Math.floor(p/24)}d ago`}P(()=>T());const V=[{name:"Dashboard",href:"/dashboard",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z",exactMatch:!0},{name:"Tickets",href:"/dashboard/tickets",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},{name:"Analytics",href:"/dashboard/analytics",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{name:"Team",href:"/dashboard/team",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{name:"Integrations",href:"/dashboard/integrations",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},{name:"Settings",href:"/dashboard/settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"}],N=W();function C(a,e=!1){return e?N.path===a:N.path.startsWith(a)}const R={FREE:"text-white/50",STARTER:"text-blue-400",PRO:"text-indigo-400",ENTERPRISE:"text-amber-400"};return(a,e)=>{const h=D,p=nt;return n(),i(y,null,[t("div",it,[x($,{name:"fade"},{default:m(()=>[s(u)?(n(),i("div",{key:0,class:"fixed inset-0 z-30 bg-black/60 backdrop-blur-sm lg:hidden",onClick:e[0]||(e[0]=o=>u.value=!1)})):v("",!0)]),_:1}),t("aside",{class:f(["fixed inset-y-0 left-0 z-40 w-64 flex flex-col transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0",s(u)?"translate-x-0":"-translate-x-full"])},[t("div",rt,[t("div",at,[e[4]||(e[4]=t("img",{src:Q,alt:"AuraDesk",class:"w-9 h-9 flex-shrink-0"},null,-1)),t("div",lt,[t("p",ct,l(s(r).organization?.name||"Agency"),1),t("p",{class:f(["text-xs",R[s(r).plan]])},l(s(r).plan)+" plan ",3)])]),t("nav",dt,[(n(),i(y,null,z(V,o=>x(h,{key:o.href,to:o.href,class:f(["flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 group",C(o.href,o.exactMatch)?"bg-indigo-500/20 text-white shadow-glass-sm border border-indigo-500/30":"text-white/60 hover:bg-white/5 hover:text-white"]),onClick:e[1]||(e[1]=Ut=>u.value=!1)},{default:m(()=>[(n(),i("svg",{class:f(["w-5 h-5 flex-shrink-0 transition-colors",C(o.href,o.exactMatch)?"text-indigo-400":"text-white/40 group-hover:text-white/60"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:o.icon},null,8,ht)],2)),j(" "+l(o.name),1)]),_:2},1032,["to","class"])),64))]),t("div",ut,[t("div",ft,[t("div",xt,l(s(r).currentUser?.fullName?.charAt(0)?.toUpperCase()||"?"),1),t("div",mt,[t("p",pt,l(s(r).currentUser?.fullName||"User"),1),t("p",vt,l(s(r).currentUser?.role?.toLowerCase()),1)]),t("button",{class:"text-white/30 hover:text-red-400 transition-colors",title:"Sign out",onClick:e[2]||(e[2]=(...o)=>s(r).logout&&s(r).logout(...o))},[...e[5]||(e[5]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])])])])])],2),t("div",wt,[t("header",_t,[t("button",{class:"lg:hidden text-white/60 hover:text-white transition-colors",onClick:e[3]||(e[3]=o=>u.value=!s(u))},[...e[6]||(e[6]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),t("h1",gt,l(V.find(o=>C(o.href,o.exactMatch))?.name||"Dashboard"),1),t("div",bt,[x(h,{to:"/dashboard/tickets/new",class:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-indigo-500 hover:bg-indigo-400 text-white text-sm font-medium rounded-lg transition-colors"},{default:m(()=>[...e[7]||(e[7]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),j(" New Ticket ",-1)])]),_:1}),t("div",kt,[t("button",{class:"relative text-white/50 hover:text-white transition-colors",onClick:I},[e[8]||(e[8]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s(k)>0?(n(),i("span",yt,l(s(k)>99?"99+":s(k)),1)):v("",!0)]),x($,{name:"fade"},{default:m(()=>[s(d)?(n(),i("div",Mt,[t("div",{class:"flex items-center justify-between px-4 py-3 border-b border-white/[0.06]"},[e[10]||(e[10]=t("h3",{class:"text-white font-semibold text-sm"},"Notifications",-1)),t("button",{onClick:M,class:"text-white/30 hover:text-white/60 transition-colors"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s(c)?(n(),i("div",Ct,[...e[11]||(e[11]=[t("div",{class:"animate-spin w-5 h-5 border-2 border-indigo-500 border-t-transparent rounded-full"},null,-1)])])):s(b).length?(n(),i("div",zt,[(n(!0),i(y,null,z(s(b),o=>(n(),L(h,{key:o.id,to:o.ticketId?`/dashboard/tickets/${o.ticketId}`:"/dashboard",class:"flex items-start gap-3 px-4 py-3 hover:bg-white/[0.04] transition-colors block",onClick:M},{default:m(()=>[t("div",Tt,[(n(),i("svg",{class:f(["w-4 h-4",U(o.type)]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:S(o.type)},null,8,Vt)],2))]),t("div",Nt,[t("div",$t,[t("span",jt,l(o.title),1),o.priority==="URGENT"?(n(),i("span",At," Urgent ")):v("",!0)]),t("p",Lt,l(o.description),1),t("p",Bt,l(E(o.createdAt)),1)])]),_:2},1032,["to"]))),128))])):(n(),i("div",Ht,[...e[12]||(e[12]=[t("svg",{class:"w-8 h-8 mx-auto text-white/10 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),t("p",{class:"text-white/30 text-sm"},"No notifications yet",-1),t("p",{class:"text-white/20 text-xs mt-1"},"Create tickets to see activity here",-1)])]))])):v("",!0)]),_:1}),s(d)?(n(),i("div",{key:0,class:"fixed inset-0 z-30",onClick:q(M,["self"])})):v("",!0)])])]),t("main",It,[J(a.$slots,"default",{},void 0,!0)])])]),x(p)],64)}}}),Pt=B(St,[["__scopeId","data-v-d39ce642"]]);export{Pt as default};
