import{_ as $}from"./I6UOz-_e.js";import{_ as O}from"./CG-kJPW7.js";import{u as A}from"./DG9wHV8O.js";import{u as G}from"./doLWckKU.js";import{g as R,A as V,c as l,a as e,t as a,m as n,n as h,d as S,k as _,F as u,r as c,b as v,w as b,o,G as g,D as B,B as w}from"./BQ0Yrhh0.js";import"./DqtgAKHa.js";const H={class:"space-y-6 animate-fade-in"},z={class:"flex items-start justify-between"},I={class:"text-2xl font-bold text-white"},P={key:0,class:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-300 text-sm"},U={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4"},F={class:"flex items-start justify-between mb-4"},W=["d"],q={class:"text-3xl font-bold text-white mb-1 tabular-nums"},J={class:"text-sm text-white/60"},K={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},Q={class:"flex items-center justify-between px-5 py-4 border-b border-white/10"},X={key:0,class:"p-4 space-y-3"},Y={key:0,class:"py-12 text-center text-white/30 text-sm"},Z={key:1,class:"divide-y divide-white/5"},ee={class:"flex-1 min-w-0"},te={class:"text-white text-sm font-medium truncate group-hover:text-indigo-300 transition-colors"},se={key:0,class:"text-white/40 text-xs"},oe={key:0,class:"flex-shrink-0 text-red-400",title:"SLA Breaching"},ne={class:"flex-shrink-0 text-white/30 text-xs"},le={class:"space-y-4"},re={key:0,class:"space-y-3"},ae={key:1,class:"space-y-3"},ie={class:"flex justify-between text-xs mb-1"},de={class:"text-white/50 tabular-nums"},ue={class:"h-1.5 rounded-full bg-white/10 overflow-hidden"},ce={class:"flex justify-between text-xs mb-1"},he={class:"text-white/50 tabular-nums"},be={class:"h-1.5 rounded-full bg-white/10 overflow-hidden"},me={class:"flex justify-between text-xs mb-1"},xe={class:"text-white/50 tabular-nums"},ge={class:"h-1.5 rounded-full bg-white/10 overflow-hidden"},pe={key:0,class:"space-y-2"},ve={key:1,class:"space-y-2"},fe={class:"flex items-center gap-2"},_e={class:"text-white/60 text-sm"},we={class:"text-white font-semibold tabular-nums text-sm"},Ne=R({__name:"index",async setup(ye){let p,y;const L=A(),{data:i,pending:m,error:N,refresh:j}=([p,y]=V(()=>G("/api/dashboard/stats",{key:"dashboard-stats"},"$530-I7_Fik")),p=await p,y(),p),T=w(()=>{const r=new Date().getHours();return r<12?"Good morning":r<17?"Good afternoon":"Good evening"}),D=w(()=>{const r=i.value?.data;return[{label:"Open Tickets",value:r?.openTickets??"â€”",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",color:"bg-blue-500/[0.08] border-blue-500/20 hover:border-blue-400/40",iconColor:"text-blue-400",link:"/dashboard/tickets?status=OPEN"},{label:"Resolved Today",value:r?.resolvedToday??"â€”",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",color:"bg-emerald-500/[0.08] border-emerald-500/20 hover:border-emerald-400/40",iconColor:"text-emerald-400",link:"/dashboard/tickets?status=RESOLVED"},{label:"SLA Breaching",value:r?.slaBreaching??"â€”",icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",color:(r?.slaBreaching??0)>0?"bg-red-500/[0.1] border-red-500/30 hover:border-red-400/50":"bg-white/[0.03] border-white/[0.06] hover:border-white/10",iconColor:(r?.slaBreaching??0)>0?"text-red-400":"text-white/40",link:"/dashboard/tickets"},{label:"AI Suggestions",value:r?.aiSuggestionsGenerated??"â€”",icon:"M13 10V3L4 14h7v7l9-11h-7z",color:"bg-purple-500/[0.08] border-purple-500/20 hover:border-purple-400/40",iconColor:"text-purple-400",link:"/dashboard/analytics"}]}),f=w(()=>{const r=i.value?.data?.sentiment;return r&&r.positive+r.neutral+r.negative||1}),k={OPEN:{label:"Open",class:"bg-blue-500/20 text-blue-300 border border-blue-500/30"},IN_PROGRESS:{label:"In Progress",class:"bg-amber-500/20 text-amber-300 border border-amber-500/30"},RESOLVED:{label:"Resolved",class:"bg-green-500/20 text-green-300 border border-green-500/30"},CLOSED:{label:"Closed",class:"bg-white/10 text-white/50 border border-white/10"}},C={URGENT:{label:"Urgent",dot:"bg-red-500"},HIGH:{label:"High",dot:"bg-orange-400"},MEDIUM:{label:"Medium",dot:"bg-amber-400"},LOW:{label:"Low",dot:"bg-green-400"}};function E(r){const s=typeof r=="string"?new Date(r):r,x=Date.now()-s.getTime(),d=Math.floor(x/6e4);if(d<1)return"just now";if(d<60)return`${d}m ago`;const t=Math.floor(d/60);return t<24?`${t}h ago`:`${Math.floor(t/24)}d ago`}return(r,s)=>{const x=$,d=O;return o(),l("div",H,[e("div",z,[e("div",null,[e("h2",I,a(n(T))+", "+a(n(L).currentUser?.fullName?.split(" ")[0]||"there")+" ðŸ‘‹ ",1),s[1]||(s[1]=e("p",{class:"text-white/50 mt-1 text-sm"},"Here's what's happening with your tickets today.",-1))]),e("button",{class:"flex items-center gap-2 px-3 py-2 text-white/40 hover:text-white/70 hover:bg-white/5 rounded-lg transition-all text-sm",onClick:s[0]||(s[0]=t=>n(j)())},[(o(),l("svg",{class:h(["w-4 h-4",{"animate-spin":n(m)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...s[2]||(s[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),s[3]||(s[3]=S(" Refresh ",-1))])]),n(N)?(o(),l("div",P," Could not load dashboard data. Check your connection and try refreshing. ")):_("",!0),e("div",U,[n(m)?(o(),l(u,{key:0},c(4,t=>e("div",{key:t,class:"h-28 rounded-2xl bg-white/5 animate-pulse",style:g({animationDelay:`${t*80}ms`})},null,4)),64)):(o(!0),l(u,{key:1},c(n(D),t=>(o(),B(x,{key:t.label,to:t.link,class:h(["relative overflow-hidden p-5 rounded-2xl border backdrop-blur-xl transition-all duration-300 hover:scale-[1.02] hover:shadow-glow",t.color])},{default:b(()=>[e("div",F,[(o(),l("svg",{class:h(["w-6 h-6",t.iconColor]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:t.icon},null,8,W)],2))]),e("p",q,a(t.value),1),e("p",J,a(t.label),1)]),_:2},1032,["to","class"]))),128))]),e("div",K,[v(d,{padding:"none",class:"xl:col-span-2"},{default:b(()=>[e("div",Q,[s[5]||(s[5]=e("h3",{class:"text-white font-semibold text-sm"},"Recent Tickets",-1)),v(x,{to:"/dashboard/tickets",class:"text-indigo-400 hover:text-indigo-300 text-xs transition-colors"},{default:b(()=>[...s[4]||(s[4]=[S(" View all â†’ ",-1)])]),_:1})]),n(m)?(o(),l("div",X,[(o(),l(u,null,c(5,t=>e("div",{key:t,class:"h-12 rounded-lg bg-white/5 animate-pulse",style:g({animationDelay:`${t*60}ms`})},null,4)),64))])):(o(),l(u,{key:1},[n(i)?.data?.recentTickets?.length?(o(),l("div",Z,[(o(!0),l(u,null,c(n(i)?.data?.recentTickets,t=>(o(),B(x,{key:t.id,to:`/dashboard/tickets/${t.id}`,class:"flex items-center gap-3 px-5 py-3.5 hover:bg-white/5 transition-colors group"},{default:b(()=>[e("div",{class:h(["w-2 h-2 rounded-full flex-shrink-0",C[t.priority]?.dot??"bg-white/20"])},null,2),e("div",ee,[e("p",te,a(t.subject),1),t.category?(o(),l("p",se,a(t.category),1)):_("",!0)]),e("span",{class:h(["flex-shrink-0 px-2 py-0.5 rounded-full text-xs font-medium",k[t.status]?.class])},a(k[t.status]?.label),3),t.isBreachingSla?(o(),l("span",oe,[...s[6]||(s[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):_("",!0),e("span",ne,a(E(t.createdAt)),1)]),_:2},1032,["to"]))),128))])):(o(),l("div",Y," No tickets yet â€” they'll appear here once created. "))],64))]),_:1}),e("div",le,[v(d,{padding:"md"},{default:b(()=>[s[10]||(s[10]=e("h3",{class:"text-white font-semibold text-sm mb-4"},"Sentiment Overview",-1)),n(m)?(o(),l("div",re,[(o(),l(u,null,c(3,t=>e("div",{key:t,class:"h-8 rounded bg-white/5 animate-pulse"})),64))])):(o(),l("div",ae,[e("div",null,[e("div",ie,[s[7]||(s[7]=e("span",{class:"text-green-400"},"ðŸ˜Š Positive",-1)),e("span",de,a(n(i)?.data?.sentiment?.positive??0),1)]),e("div",ue,[e("div",{class:"h-full rounded-full bg-green-500 transition-all duration-700",style:g({width:`${(n(i)?.data?.sentiment?.positive??0)/n(f)*100}%`})},null,4)])]),e("div",null,[e("div",ce,[s[8]||(s[8]=e("span",{class:"text-white/60"},"ðŸ˜ Neutral",-1)),e("span",he,a(n(i)?.data?.sentiment?.neutral??0),1)]),e("div",be,[e("div",{class:"h-full rounded-full bg-white/40 transition-all duration-700",style:g({width:`${(n(i)?.data?.sentiment?.neutral??0)/n(f)*100}%`})},null,4)])]),e("div",null,[e("div",me,[s[9]||(s[9]=e("span",{class:"text-red-400"},"ðŸ˜¡ Negative",-1)),e("span",xe,a(n(i)?.data?.sentiment?.negative??0),1)]),e("div",ge,[e("div",{class:"h-full rounded-full bg-red-500 transition-all duration-700",style:g({width:`${(n(i)?.data?.sentiment?.negative??0)/n(f)*100}%`})},null,4)])])]))]),_:1}),v(d,{padding:"md"},{default:b(()=>[s[11]||(s[11]=e("h3",{class:"text-white font-semibold text-sm mb-4"},"Tickets by Priority",-1)),n(m)?(o(),l("div",pe,[(o(),l(u,null,c(4,t=>e("div",{key:t,class:"h-7 rounded bg-white/5 animate-pulse"})),64))])):(o(),l("div",ve,[(o(),l(u,null,c(C,(t,M)=>e("div",{key:M,class:"flex items-center justify-between py-1"},[e("div",fe,[e("div",{class:h(["w-2 h-2 rounded-full",t.dot])},null,2),e("span",_e,a(t.label),1)]),e("span",we,a(n(i)?.data?.priority?.[M.toLowerCase()]??0),1)])),64))]))]),_:1})])])])}}});export{Ne as default};
