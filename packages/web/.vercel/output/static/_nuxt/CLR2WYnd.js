import{_ as C}from"./I6UOz-_e.js";import{_ as j}from"./CG-kJPW7.js";import{g as M,l as B,c as d,a as e,b as u,w as m,m as s,d as n,t as r,k as N,j as S,x as V,o as c,p as b,v as x,F as E,r as z,n as T,J as A,y as v,B as W}from"./BQ0Yrhh0.js";import{u as L}from"./B_U5j8G_.js";const F={class:"max-w-3xl mx-auto animate-fade-in"},U={class:"flex items-center gap-3 mb-6"},D={class:"space-y-4"},I=["disabled"],P={class:"text-white/30 text-xs mt-1"},q=["disabled"],H={class:"text-white/30 text-xs mt-1"},$={class:"grid grid-cols-2 sm:grid-cols-4 gap-2"},J=["onClick"],G={class:"text-lg block mb-1"},K={class:"text-xs"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},R=["disabled"],Q=["disabled"],X={key:0,class:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-300 text-sm flex items-start gap-2"},Y={class:"flex items-center justify-end gap-3"},Z=["disabled"],ee={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},te={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re=M({__name:"new",setup(se){const f=B(),g=L(),o=A({subject:"",body:"",channel:"WEB",customerName:"",customerEmail:""}),i=v(!1),a=v(null),w=[{value:"WEB",label:"ðŸŒ Web",description:"Web form or chat"},{value:"EMAIL",label:"âœ‰ï¸ Email",description:"Email message"},{value:"WHATSAPP",label:"ðŸ’¬ WhatsApp",description:"WhatsApp message"},{value:"SLACK",label:"âš¡ Slack",description:"Slack message"}];async function y(){if(a.value=null,!o.subject.trim()||!o.body.trim()){a.value="Subject and message body are required.";return}i.value=!0;try{const p=await $fetch("/api/tickets",{method:"POST",body:{subject:o.subject,body:o.body,channel:o.channel,customerName:o.customerName||void 0,customerEmail:o.customerEmail||void 0}});g.success("Ticket created! AI is analyzing it in the background."),await f.push(`/dashboard/tickets/${p.data.id}`)}catch(p){a.value=p?.data?.message??"Failed to create ticket. Please try again.",g.error(a.value)}finally{i.value=!1}}const _=W(()=>o.subject.trim().length>0&&o.body.trim().length>0);return(p,t)=>{const k=C,h=j;return c(),d("div",F,[e("div",U,[u(k,{to:"/dashboard/tickets",class:"text-white/40 hover:text-white/70 transition-colors"},{default:m(()=>[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),t[5]||(t[5]=e("h2",{class:"text-xl font-bold text-white"},"Create New Ticket",-1))]),e("form",{onSubmit:V(y,["prevent"]),class:"space-y-5"},[u(h,{padding:"md"},{default:m(()=>[t[8]||(t[8]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),n(" Ticket Details ")],-1)),e("div",D,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm text-white/70 mb-1.5"},"Subject *",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).subject=l),type:"text",placeholder:"Brief description of the issue...",class:"input-glass",maxlength:"200",disabled:s(i)},null,8,I),[[x,s(o).subject]]),e("p",P,r(s(o).subject.length)+"/200",1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm text-white/70 mb-1.5"},"Message Body *",-1)),b(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).body=l),rows:"6",placeholder:"Full description of the customer's issue, request, or question...",class:"input-glass resize-none",maxlength:"5000",disabled:s(i)},null,8,q),[[x,s(o).body]]),e("p",H,r(s(o).body.length)+"/5000",1)])])]),_:1}),u(h,{padding:"md"},{default:m(()=>[t[9]||(t[9]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),n(" Channel ")],-1)),e("div",$,[(c(),d(E,null,z(w,l=>e("button",{key:l.value,type:"button",class:T(["p-3 rounded-xl text-center transition-all duration-200 text-sm",s(o).channel===l.value?"bg-indigo-500/20 border border-indigo-500/40 text-white":"bg-white/[0.04] border border-white/[0.06] text-white/60 hover:bg-white/[0.08]"]),onClick:oe=>s(o).channel=l.value},[e("span",G,r(l.label.split(" ")[0]),1),e("span",K,r(l.label.split(" ").slice(1).join(" ")),1)],10,J)),64))])]),_:1}),u(h,{padding:"md"},{default:m(()=>[t[12]||(t[12]=e("h3",{class:"text-white font-semibold text-sm mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),n(" Customer Information "),e("span",{class:"text-white/30 font-normal"},"(optional)")],-1)),e("div",O,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm text-white/70 mb-1.5"},"Customer Name",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).customerName=l),type:"text",placeholder:"John Doe",class:"input-glass",disabled:s(i)},null,8,R),[[x,s(o).customerName]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm text-white/70 mb-1.5"},"Customer Email",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).customerEmail=l),type:"email",placeholder:"john@example.com",class:"input-glass",disabled:s(i)},null,8,Q),[[x,s(o).customerEmail]])])])]),_:1}),s(a)?(c(),d("div",X,[t[13]||(t[13]=e("svg",{class:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n(" "+r(s(a)),1)])):N("",!0),t[17]||(t[17]=S('<div class="flex items-start gap-3 p-4 bg-purple-500/[0.06] border border-purple-500/20 rounded-xl"><svg class="w-5 h-5 text-purple-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg><div><p class="text-purple-300 text-sm font-medium">AI will automatically analyze this ticket</p><p class="text-white/40 text-xs mt-1">Sentiment, priority, category, and a suggested reply will be generated in the background.</p></div></div>',1)),e("div",Y,[u(k,{to:"/dashboard/tickets",class:"btn-ghost text-sm"},{default:m(()=>[...t[14]||(t[14]=[n(" Cancel ",-1)])]),_:1}),e("button",{type:"submit",disabled:s(i)||!s(_),class:"btn-primary flex items-center gap-2"},[s(i)?(c(),d("svg",ee,[...t[15]||(t[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):(c(),d("svg",te,[...t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)])])),n(" "+r(s(i)?"Creating...":"Create Ticket"),1)],8,Z)])],32)])}}});export{re as default};
